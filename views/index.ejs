<!DOCTYPE html>
<html lang="en">
  <%- include("./partials/head.ejs") %>
  <style>
    body {
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
  </style>
  <body>
    <%- include("./partials/nav.ejs") %>
    <div class="top-container">
      <div class="search-container">
        <!-- <div class="search-box">
          <input type="text" placeholder="search" id="search-field" />
        </div> -->
        <div class="manual-entry-form-container">
          <!-- <summary class="custom-entry">Can't find the city? Add it manually</summary> -->
          <form action="/index" method="post" class="enter-place">
            <!-- <label>geonameid<input type="text" name="geonameid" id="form-geonameid" /></label> -->
            <label>City:<input type="text" name="city" id="form-city" /></label>
            <label>Country: <input type="text" name="country" id="form-country" /></label>
            <!-- <label>Urban Area: <input type="text" name="urban_area" id="form-urban_area" /></label> -->
            <!-- <label>Population: <input type="text" name="population" id="form-population" /></label> -->
            <!-- <label>Latitude: <input type="text" name="latitude" id="form-latitude" /></label> -->
            <!-- <label>Longitude:<input type="text" name="longitude" id="form-longitude" /></label> -->
            <label>Photo: <input type="url" name="photo_url" id="form-photo_url" /></label>
            <!-- <label>desktop_img<input type="url" name="desktop_img" /></label> -->
            <!-- <label>mobile_img<input type="text" name="mobile_img" /></label> -->
            <label
              >Status
              <select name="status" id="custom-search">
                <option value="Visited">Visited</option>
                <option value="Going">Going</option>
                <option value="Want to go">Want to go</option>
              </select>
            </label>
            <label>Date<input type="date" name="date" /></label>
            <!-- <label>Travel Notes:<input type="text" name="notes" id="form-notes" /></label> -->
            <!-- <label>creator<input type="text" name="creator" /></label> -->
            <button>Submit</button>
          </form>
        </div>
        <div class="search-results-container">
          <div class="search-results-div"></div>
        </div>
      </div>
      <div class="collection-container">
        <% for (i=allCities.length-1; i>=0; i--) { %>

        <div class="collection-item">
          <div class="city-photo">
            <img src="<%= allCities[i].mobile_img %>" alt="" />
          </div>
          <div class="city-action-container">
            <div class="action-block">
              <a href="/index/<%= allCities[i]._id %>">
                <div class="city-name-container">
                  <div class="city-full-name"><%= allCities[i].city %>, <%= allCities[i].country %></div>
                </div>
              </a>

              <div class="location-stats">
                <table class="location-stats-table">
                  <tr>
                    <td>Population</td>
                    <% if (allCities[i].population !== undefined) { %>
                    <td><%= allCities[i].population.toLocaleString() %></td>
                    <% } %>
                  </tr>
                  <tr>
                    <td>Status</td>
                    <td><%= allCities[i].status %></td>
                  </tr>
                  <tr>
                    <td>Date</td>
                    <td><%= allCities[i].date %></td>
                  </tr>
                </table>
              </div>

              <div class="buttons-container">
                <a href="/index/<%= allCities[i]._id %>/edit" class="edit-button"> Edit </a>
                <div class="delete-button">
                  <form class="index-form" action="/index/<%=allCities[i]._id %>?_method=DELETE" method="post">
                    <input type="submit" value="Delete" id="delete-location" />
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>

        <% } %>
      </div>
    </div>
  </body>
  <%- include("./partials/footer.ejs") %>
</html>
